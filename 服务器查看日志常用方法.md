                                
								         常用Linux命令 | 服务器查看日志

入门篇
cd         退回到根目录
cd logs/antinvoice  进入相应目录
【ccbin目录下】./checkservice.sh  检查服务器启动情况
【ccbin目录下】./ccupdate 更新服务器代码
【ccbin目录下】./build.sh 编译代码
【ccbin目录下】./deploy.sh 部署代码
【ccbin目录下】./build.sh && ./deploy.sh 构建并部署代码
【ccbin目录下】qcbd 以上三个命令按顺序依次走一遍
【build目录下】svn info 查看代码流路径、版本
tail -f *log 查看该目录下所有日志
ls 查看该目录下所有文件列表
tail -300f common-error.log 查看后300条错误日志
grep 123456 *log 在所有日志里搜关于123456的内容


tail -f 实时查看日志文件 tail -f 日志文件log
tail - 100f 实时查看日志文件 后一百行
tail -f -n 100 catalina.out linux查看日志后100行
搜寻字符串
grep ‘搜寻字符串’ filename
按ctrl+c 退出

vi
vi编辑器查看日志（这个很少使用因为进入文件内容太大了）
根目录下进入：vi antx.properties
i键：进入可编辑状态
:q! :不保存退出
:wq :保存退出
esc退出

---------------------------------------------------------------------------------------------------------     
附件内容：

修改antx配置项
根目录下进入：vim antx.properties
i键：进入可编辑状态
:q! :不保存退出
:wq :保存退出
esc退出

补充：一般测试异常，需要把对应系统ip指向一个无效的地址，这时需修改antx配置项
修改服务器域名
根目录下    vi /etc/hosts
修改服务器代码

根目录下进入该文件所在目录：$ find -name "LotteryUtil.java"
再进入到LotteryUtil.java所在目录
vim antx.properties
键入i进入编辑模式
修改完后wq保存退出
最后 ./build.sh && ./deploy.sh

补充：有的数据被开发写死了，有时候测试需要更改，这种方法可行，但服务器代码被别人ccupdate之后，改更改失效。
服务器启动报错

进入对应目录 vi /home/admin/logs/etetestcore/sofa/sofa-startup.log
more sofa-startup.log  空格键  翻页

实例3：设定每屏显示行数
命令： more -5 log2012.log 输出： [root@localhost test]# more -5 log2012.log

Linux查看日志
cloud.tencent.com 2018-05-102018
在RD的日常开发中，在无数与BUG的斗争中，一定存在无数的自测，或者他侧，在本机的IDE上，查看错误信息，可以看控制台输出的错误信息，但此时如果已经部署到服务器上，你在服务器运行时，发现错误反馈，那必须要读取服务器日志信息。
读取服务器日志信息有两种方式：
1、通过某远程ftp软件，将远端服务器的文件down到本机，然后作为windows的一个文本文件，相信知道怎么操作吧~ 看最新的日志，用鼠标拉到最底就ok了~ 查找某个关键词，ctrl+f就可以了~ 看起来很简单的操作，简直low爆了。。。每一次差错误，都要增加服务器与本机的运行压力，明明只想看其中一部分文件，却要通篇复制过来，文件大的话，还要等待复制完成~~ 那么有没有更好的方法呢？？？如下。
2、直接远程linux服务器，通过终端软件实现对服务器的操作（例如：xshell、secureCRT）。
查看文件命令，常用的有cat、more、less、head、tail、vim。
cat 文件名：会将文件所有内容从头到尾输出在屏幕上，但对于动辄多少万行的日志文件来说，无意是灭灯之灾....，你会看到屏幕上在不停的走下一行，直到地老天荒..... 当然还有一个命令是tac，跟cat一样会全部打印，只不过是从尾至头，同样不好用。
more 文件名：功能与less类似，但只能向后翻页，不能向前翻页，重点介绍less命令。
less 文件名：less在查看前不会加载整个文件，降低系统开销。进去后加载第一页，若要翻页要查找，请看如下快捷键。
/字符串：向后查找关键词
？字符串：向前查找
上下：上一行下一行
q：退出
G：最后一行
gg：第一行
ctrl+f/b/u/d(forward/backward/upward/downward)：翻页【下一页，上一页，上半页，下半页】

head / tail 文件名：显示该文件的前10行/末尾10行，如果想改变显示行数，
例如显示2行：head/tail -n 2 文件名。

tail -f：默认显示最后10行，实时更新文件。（上面的命令如果打开文件了，那么文件内容就定格在打开的时候，如果文件实际上更新了，但是已经打开的不会显示更新，使用tail -f这个命令就会实时更新文件内容）
vim 文件名：vim这个功能很强大了，linux沾点边的都应该有所耳闻，它的快捷键与less的快捷键基本吻合，但比less多了修改删除的功能，可能对于查看日志文件来说，less会更安全一些。
结束语：对于查看日志，最常用的快捷键就是：less 和 tail -f



less 

1. > 直接查看文件
less catalina.out
 

查看文件后，若文件过大，打通过以下命令滚动文件：

复制代码
j    下一行
k    上一行
f    向下滚动一屏幕
b    向上滚动一屏幕
g    定位到文档头部
G    定位到文档最尾部
复制代码
 

退出查看文件

q    退出less模式
 

2. > 带出行号查看文件
日志文件一般有上万行，带行号显示会方便很多

less -N catalina.out
 

3. > 查找内容
查找关键字内容时，常用向下查找、向上查看。如在日志中查找，因日志一般是追加的，从下向上查找更为常用。

复制代码
/keyword　　向下查找
n    向下匹配下一处匹配文本
N    向上匹配下一处匹配文本

?keyword　　向上查找
n    向上匹配下一处匹配文本
N    向下匹配下一处匹配文本
复制代码
 

4. > 实时查看文档变动（实时滚动文档）
进入less模式后，键入F，即实时滚动文档

F    　　　　实时滚动文档
Ctrl + c　　退出实时滚动模式

类似效果：
tail -f catalina.out
